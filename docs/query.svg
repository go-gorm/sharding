<svg id="graph-div" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="2493.78955078125" style="max-width: 1191.07421875px;" viewBox="0 0 1191.07421875 2493.78955078125"><style>#graph-div {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#graph-div .error-icon{fill:#552222;}#graph-div .error-text{fill:#552222;stroke:#552222;}#graph-div .edge-thickness-normal{stroke-width:2px;}#graph-div .edge-thickness-thick{stroke-width:3.5px;}#graph-div .edge-pattern-solid{stroke-dasharray:0;}#graph-div .edge-pattern-dashed{stroke-dasharray:3;}#graph-div .edge-pattern-dotted{stroke-dasharray:2;}#graph-div .marker{fill:#333333;stroke:#333333;}#graph-div .marker.cross{stroke:#333333;}#graph-div svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#graph-div .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#graph-div .cluster-label text{fill:#333;}#graph-div .cluster-label span{color:#333;}#graph-div .label text,#graph-div span{fill:#333;color:#333;}#graph-div .node rect,#graph-div .node circle,#graph-div .node ellipse,#graph-div .node polygon,#graph-div .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#graph-div .node .label{text-align:center;}#graph-div .node.clickable{cursor:pointer;}#graph-div .arrowheadPath{fill:#333333;}#graph-div .edgePath .path{stroke:#333333;stroke-width:2.0px;}#graph-div .flowchart-link{stroke:#333333;fill:none;}#graph-div .edgeLabel{background-color:#e8e8e8;text-align:center;}#graph-div .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#graph-div .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#graph-div .cluster text{fill:#333;}#graph-div .cluster span{color:#333;}#graph-div div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#graph-div :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><g class="output"><g class="clusters"><g class="cluster" id="flowchart-database-88900" style="opacity: 1;" transform="translate(585.23046875,2309.4479598999023)"><rect width="1154.4609375" height="164.6834259033203" x="-577.23046875" y="-82.34171295166016"></rect><g class="label" transform="translate(0, -68.34171295166016)" id="graph-divText"><g transform="translate(-32.75,-12)"><foreignObject width="65.5" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Database</div></foreignObject></g></g></g><g class="cluster" id="flowchart-sharding-88901" style="opacity: 1;" transform="translate(684.6549530029297,1462.553123474121)"><rect width="996.8385314941406" height="1381.1062469482422" x="-498.4192657470703" y="-690.5531234741211"></rect><g class="label" transform="translate(0, -676.5531005859375)" id="graph-divText"><g transform="translate(-42.4765625,-12)"><foreignObject width="84.953125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">MyConnPool</div></foreignObject></g></g></g><g class="cluster" id="flowchart-subGraph1-88902" style="opacity: 1;" transform="translate(693.9062614440918,628)"><rect width="634.1562652587891" height="188" x="-317.07813262939453" y="-94"></rect><g class="label" transform="translate(0, -80)" id="graph-divText"><g transform="translate(-72.125,-12)"><foreignObject width="144.25" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">database/sql - Conn</div></foreignObject></g></g></g><g class="cluster" id="flowchart-Gorm-88903" style="opacity: 1;" transform="translate(665.171875,390)"><rect width="330.34375" height="188" x="-165.171875" y="-94"></rect><g class="label" transform="translate(0, -80)" id="graph-divText"><g transform="translate(-19.453125,-12)"><foreignObject width="38.90625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Gorm</div></foreignObject></g></g></g></g><g class="edgePaths"><g class="edgePath LS-first LE-db" style="opacity: 1;" id="L-first-db"><path class="path" d="M665.171875,172L665.171875,176.16666666666666C665.171875,180.33333333333334,665.171875,188.66666666666666,665.171875,199C665.171875,209.33333333333334,665.171875,221.66666666666666,665.171875,234C665.171875,246.33333333333334,665.171875,258.6666666666667,665.171875,269C665.171875,279.3333333333333,665.171875,287.6666666666667,665.171875,296C665.171875,304.3333333333333,665.171875,312.6666666666667,665.171875,316.8333333333333L665.171875,321" marker-end="url(#arrowhead111958)" style="fill:none"></path><defs><marker id="arrowhead111958" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-db LE-gorm_query" style="opacity: 1;" id="L-db-gorm_query"><path class="path" d="M665.171875,365L665.171875,369.1666666666667C665.171875,373.3333333333333,665.171875,381.6666666666667,665.171875,390C665.171875,398.3333333333333,665.171875,406.6666666666667,665.171875,410.8333333333333L665.171875,415" marker-end="url(#arrowhead111959)" style="fill:none"></path><defs><marker id="arrowhead111959" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-gorm_query LE-Conn" style="opacity: 1;" id="L-gorm_query-Conn"><path class="path" d="M665.171875,459L665.171875,463.1666666666667C665.171875,467.3333333333333,665.171875,475.6666666666667,665.171875,484C665.171875,492.3333333333333,665.171875,500.6666666666667,665.171875,509C665.171875,517.3333333333334,665.171875,525.6666666666666,665.171875,534C665.171875,542.3333333333334,665.171875,550.6666666666666,665.171875,554.8333333333334L665.171875,559" marker-end="url(#arrowhead111960)" style="fill:none"></path><defs><marker id="arrowhead111960" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-Conn LE-ExecContext" style="opacity: 1;" id="L-Conn-ExecContext"><path class="path" d="M631.8515625,589.5159879369859L606.7556425730387,595.9299899474883C581.6597226460775,602.3439919579906,531.4678827921549,615.1719959789953,506.45529619852704,625.8359979894976C481.4427096048991,636.5,481.60937627156574,645,481.6927096048991,649.25L481.7760429382324,653.5" marker-end="url(#arrowhead111961)" style="fill:none"></path><defs><marker id="arrowhead111961" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-Conn LE-QueryContext" style="opacity: 1;" id="L-Conn-QueryContext"><path class="path" d="M669.6552544451774,603L670.5043793400974,607.1666666666666C671.3535042350173,611.3333333333334,673.0517540248574,619.6666666666666,673.9842122531106,628.0833333333334C674.9166704813639,636.5,675.0833371480306,645.0000000000001,675.1666704813639,649.2500000000001L675.2500038146973,653.5000000000001" marker-end="url(#arrowhead111962)" style="fill:none"></path><defs><marker id="arrowhead111962" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-Conn LE-QueryRowContext" style="opacity: 1;" id="L-Conn-QueryRowContext"><path class="path" d="M698.4921875,588.0476861305341L729.9735266367594,594.7064051087784C761.4548657735189,601.3651240870228,824.4175440470377,614.6825620435114,855.9822165171305,625.5912810217557C887.5468889872233,636.5,887.71355565389,645,887.7968889872233,649.25L887.8802223205566,653.5" marker-end="url(#arrowhead111963)" style="fill:none"></path><defs><marker id="arrowhead111963" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-QueryContext LE-router" style="opacity: 1;" id="L-QueryContext-router"><path class="path" d="M675.2500038146973,697.4999999999999L675.1666704813639,701.5833333333334C675.0833371480306,705.6666666666666,674.9166704813639,713.8333333333334,674.8333371480306,722.0833333333334C674.7500038146973,730.3333333333334,674.7500038146973,738.6666666666666,674.7500038146973,747C674.7500038146973,755.3333333333334,674.7500038146973,763.6666666666666,674.8333371480306,772.0833333333334C674.9166704813639,780.5,675.0833371480306,789,675.1666704813639,793.25L675.2500038146973,797.5" marker-end="url(#arrowhead111964)" style="fill:none"></path><defs><marker id="arrowhead111964" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-router LE-format_sql" style="opacity: 1;" id="L-router-format_sql"><path class="path" d="M675.2500038146973,865.5L675.1666704813639,869.5833333333334C675.0833371480306,873.6666666666666,674.9166704813639,881.8333333333334,674.9166704813639,890.1666666666666C674.9166704813639,898.5,675.0833371480306,907,675.1666704813639,911.25L675.2500038146973,915.5" marker-end="url(#arrowhead111965)" style="fill:none"></path><defs><marker id="arrowhead111965" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-format_sql LE-parse" style="opacity: 1;" id="L-format_sql-parse"><path class="path" d="M675.2500038146973,1055.5L675.1666704813639,1059.5833333333333C675.0833371480306,1063.6666666666667,674.9166704813639,1071.8333333333333,674.9166704813639,1080.1666666666667C674.9166704813639,1088.5,675.0833371480306,1097,675.1666704813639,1101.25L675.2500038146973,1105.5" marker-end="url(#arrowhead111966)" style="fill:none"></path><defs><marker id="arrowhead111966" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-parse LE-check_table" style="opacity: 1;" id="L-parse-check_table"><path class="path" d="M675.2500038146973,1197.5L675.1666704813639,1201.5833333333333C675.0833371480306,1205.6666666666667,674.9166704813639,1213.8333333333333,674.9166704813639,1222.1666669209799C674.916670481364,1230.5000005086263,675.0833371480308,1239.0000010172525,675.1666704813641,1243.2500012715657L675.2500038146975,1247.5000015258788" marker-end="url(#arrowhead111967)" style="fill:none"></path><defs><marker id="arrowhead111967" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-check_table LE-process_ast" style="opacity: 1;" id="L-check_table-process_ast"><path class="path" d="M622.3002783910359,1406.6408980504602L607.2665086699795,1421.5491853667572C592.232738948923,1436.4574726830542,562.1651995068102,1466.2740473156482,547.1314297857538,1487.349001298612C532.0976600646973,1508.4239552815754,532.0976600646973,1520.757288614909,532.0976600646973,1526.9239552815754L532.0976600646973,1533.0906219482422" marker-end="url(#arrowhead111968)" style="fill:none"></path><defs><marker id="arrowhead111968" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-check_table LE-check_table_1" style="opacity: 1;" id="L-check_table-check_table_1"><path class="path" d="M750.5083168227899,1384.3323135177868L796.1605765189915,1402.958698256196C841.8128362151932,1421.5850829946055,933.1173556075966,1458.8378524714237,978.7696153037983,1493.7155392931663C1024.421875,1528.593226114909,1024.421875,1561.0958302815754,1024.421875,1593.5984344482422C1024.421875,1626.101038614909,1024.421875,1658.6036427815754,1024.421875,1686.6882781982422C1024.421875,1714.772913614909,1024.421875,1738.4395802815754,1024.421875,1762.1062469482422C1024.421875,1785.772913614909,1024.421875,1809.4395802815754,1024.421875,1835.1062469482422C1024.421875,1860.772913614909,1024.421875,1888.4395802815754,1024.421875,1916.1062469482422C1024.421875,1943.772913614909,1024.421875,1971.4395802815754,1024.5052083333333,1995.522913614909C1024.5885416666667,2019.6062469482422,1024.7552083333333,2040.1062469482422,1024.8385416666667,2050.356246948242L1024.921875,2060.606246948242" marker-end="url(#arrowhead111969)" style="fill:none;stroke-width:2px;stroke-dasharray:3;"></path><defs><marker id="arrowhead111969" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-process_ast LE-not_match_error" style="opacity: 1;" id="L-process_ast-not_match_error"><path class="path" d="M481.25769414274924,1626.4083908424577L464.54916436944603,1637.1913668600885C447.8406345961427,1647.9743428777192,414.42357504953617,1669.540294912981,397.79837860956627,1686.5732709306114C381.1731821695964,1703.6062469482422,381.339848836263,1716.1062469482422,381.4231821695964,1722.3562469482422L381.5065155029297,1728.6062469482424" marker-end="url(#arrowhead111970)" style="fill:none;stroke-width:2px;stroke-dasharray:3;"></path><defs><marker id="arrowhead111970" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-process_ast LE-match_sharding_key" style="opacity: 1;" id="L-process_ast-match_sharding_key"><path class="path" d="M586.8374087574164,1619.3812831386626L612.2173718811804,1631.3354437735925C637.5973350049443,1643.2896044085226,688.3572612524722,1667.1979256783823,713.7372243762361,1687.3187529799789C739.1171875,1707.4395802815754,739.1171875,1723.772913614909,739.1171875,1731.9395802815754L739.1171875,1740.1062469482422" marker-end="url(#arrowhead111971)" style="fill:none"></path><defs><marker id="arrowhead111971" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-match_sharding_key LE-get_new_table_name" style="opacity: 1;" id="L-match_sharding_key-get_new_table_name"><path class="path" d="M739.1171875,1784.1062469482422L739.1171875,1792.272913614909C739.1171875,1800.4395802815754,739.1171875,1816.772913614909,739.2005208333334,1831.1895802815754C739.2838541666666,1845.6062469482422,739.4505208333334,1858.1062469482422,739.5338541666666,1864.3562469482422L739.6171875,1870.6062469482422" marker-end="url(#arrowhead111972)" style="fill:none"></path><defs><marker id="arrowhead111972" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-get_new_table_name LE-new_sql" style="opacity: 1;" id="L-get_new_table_name-new_sql"><path class="path" d="M739.6171875,1962.6062469482422L739.5338541666666,1968.6895802815754C739.4505208333334,1974.772913614909,739.2838541666666,1986.9395802815754,739.2838541666666,1999.272913614909C739.2838541666666,2011.6062469482422,739.4505208333334,2024.1062469482422,739.5338541666666,2030.3562469482422L739.6171875,2036.6062469482422" marker-end="url(#arrowhead111973)" style="fill:none"></path><defs><marker id="arrowhead111973" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-new_sql LE-orders_4" style="opacity: 1;" id="L-new_sql-orders_4"><path class="path" d="M739.6171875,2128.606246948242L739.5338541666666,2132.6895802815757C739.4505208333334,2136.7729136149087,739.2838541666666,2144.9395802815757,739.2005208333334,2155.1895802815757C739.1171875,2165.4395802815757,739.1171875,2177.7729136149087,739.1171875,2190.106246948242C739.1171875,2202.4395802815757,739.1171875,2214.7729136149087,739.1171875,2230.9965324401855C739.1171875,2247.2201512654624,739.1171875,2267.334055582682,739.1171875,2277.3910077412925L739.1171875,2287.4479598999023" marker-end="url(#arrowhead111974)" style="fill:none"></path><defs><marker id="arrowhead111974" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-check_table_1 LE-other_tables" style="opacity: 1;" id="L-check_table_1-other_tables"><path class="path" d="M1024.921875,2104.606246948242L1024.8385416666667,2112.6895802815757C1024.7552083333333,2120.7729136149087,1024.5885416666667,2136.9395802815757,1024.5052083333333,2151.1895802815757C1024.421875,2165.4395802815757,1024.421875,2177.7729136149087,1024.421875,2190.106246948242C1024.421875,2202.4395802815757,1024.421875,2214.7729136149087,1024.421875,2225.106246948242C1024.421875,2235.4395802815757,1024.421875,2243.7729136149087,1024.421875,2247.9395802815757L1024.421875,2252.106246948242" marker-end="url(#arrowhead111975)" style="fill:none;stroke-width:2px;stroke-dasharray:3;"></path><defs><marker id="arrowhead111975" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-posts_4 LE-result" style="opacity: 1;" id="L-posts_4-result"><path class="path" d="M377.6953125,2346.2944831848145L377.6953125,2353.877014795939C377.6953125,2361.459546407064,377.6953125,2376.624609629313,377.6953125,2388.3738079071045C377.6953125,2400.123006184896,377.6953125,2408.456339518229,418.7548433500724,2419.071217942596C459.8143742001448,2429.686096366963,541.9334359002895,2442.5825198823636,582.9929667503619,2449.0307316400636L624.0524976004343,2455.478943397764" marker-end="url(#arrowhead111976)" style="fill:none"></path><defs><marker id="arrowhead111976" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-other_tables LE-result" style="opacity: 1;" id="L-other_tables-result"><path class="path" d="M1024.421875,2366.7896728515625L1024.421875,2370.956339518229C1024.421875,2375.123006184896,1024.421875,2383.456339518229,1024.421875,2391.7896728515625C1024.421875,2400.123006184896,1024.421875,2408.456339518229,976.6840734767724,2419.237247736152C928.9462719535446,2430.0181559540747,833.4706689070891,2443.2466390565874,785.7328673838615,2449.8608806078437L737.9950658606338,2456.4751221591" marker-end="url(#arrowhead111977)" style="fill:none;stroke-width:2px;stroke-dasharray:3;"></path><defs><marker id="arrowhead111977" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g></g><g class="edgeLabels"><g class="edgeLabel" style="opacity: 1;" transform="translate(665.171875,234)"><g transform="translate(-43.0625,-12)" class="label"><rect rx="0" ry="0" width="86.125" height="24"></rect><foreignObject width="86.125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-first-db" class="edgeLabel L-LS-first' L-LE-db">Gorm Query</span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-db-gorm_query" class="edgeLabel L-LS-db' L-LE-gorm_query"></span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-gorm_query-Conn" class="edgeLabel L-LS-gorm_query' L-LE-Conn"></span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-Conn-ExecContext" class="edgeLabel L-LS-Conn' L-LE-ExecContext"></span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-Conn-QueryContext" class="edgeLabel L-LS-Conn' L-LE-QueryContext"></span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-Conn-QueryRowContext" class="edgeLabel L-LS-Conn' L-LE-QueryRowContext"></span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-QueryContext-router" class="edgeLabel L-LS-QueryContext' L-LE-router"></span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-router-format_sql" class="edgeLabel L-LS-router' L-LE-format_sql"></span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-format_sql-parse" class="edgeLabel L-LS-format_sql' L-LE-parse"></span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-parse-check_table" class="edgeLabel L-LS-parse' L-LE-check_table"></span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform="translate(532.0976600646973,1496.0906219482422)"><g transform="translate(-16.984375,-12)" class="label"><rect rx="0" ry="0" width="33.96875" height="24"></rect><foreignObject width="33.96875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-check_table-process_ast" class="edgeLabel L-LS-check_table' L-LE-process_ast">Exist</span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform="translate(1024.421875,1762.1062469482422)"><g transform="translate(-32.046875,-12)" class="label"><rect rx="0" ry="0" width="64.09375" height="24"></rect><foreignObject width="64.09375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-check_table-check_table_1" class="edgeLabel L-LS-check_table' L-LE-check_table_1">Not exist</span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform="translate(381.0065155029297,1691.1062469482422)"><g transform="translate(-83.0625,-12)" class="label"><rect rx="0" ry="0" width="166.125" height="24"></rect><foreignObject width="166.125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-process_ast-not_match_error" class="edgeLabel L-LS-process_ast' L-LE-not_match_error">Not match ShardingKey</span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform="translate(739.1171875,1691.1062469482422)"><g transform="translate(-67.1171875,-12)" class="label"><rect rx="0" ry="0" width="134.234375" height="24"></rect><foreignObject width="134.234375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-process_ast-match_sharding_key" class="edgeLabel L-LS-process_ast' L-LE-match_sharding_key">Match ShardingKey</span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform="translate(739.1171875,1833.1062469482422)"><g transform="translate(-55.8984375,-12)" class="label"><rect rx="0" ry="0" width="111.796875" height="24"></rect><foreignObject width="111.796875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-match_sharding_key-get_new_table_name" class="edgeLabel L-LS-match_sharding_key' L-LE-get_new_table_name">Get table name</span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform="translate(739.1171875,1999.1062469482422)"><g transform="translate(-126.4453125,-12)" class="label"><rect rx="0" ry="0" width="252.890625" height="24"></rect><foreignObject width="252.890625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-get_new_table_name-new_sql" class="edgeLabel L-LS-get_new_table_name' L-LE-new_sql">Replace TableName to get new SQL</span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform="translate(739.1171875,2190.106246948242)"><g transform="translate(-54.265625,-12)" class="label"><rect rx="0" ry="0" width="108.53125" height="24"></rect><foreignObject width="108.53125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-new_sql-orders_4" class="edgeLabel L-LS-new_sql' L-LE-orders_4">Sharding Query</span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform="translate(1024.421875,2190.106246948242)"><g transform="translate(-74.1953125,-12)" class="label"><rect rx="0" ry="0" width="148.390625" height="24"></rect><foreignObject width="148.390625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-check_table_1-other_tables" class="edgeLabel L-LS-check_table_1' L-LE-other_tables">None sharding Query</span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-posts_4-result" class="edgeLabel L-LS-posts_4' L-LE-result"></span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-other_tables-result" class="edgeLabel L-LS-other_tables' L-LE-result"></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default" style="opacity: 1;" id="flowchart-posts_other-88887" label-offset-y="16.52506462138226" transform="translate(164.8671875,2309.4479598999023)"><path d="M 0,16.52506462138226 a 121.8671875,16.52506462138226 0,0,0 243.734375 0 a 121.8671875,16.52506462138226 0,0,0 -243.734375 0 l 0,60.525064621382256 a 121.8671875,16.52506462138226 0,0,0 243.734375 0 l 0,-60.525064621382256" transform="translate(-121.8671875,-46.787596932073384)" class="label-container"></path><g class="label" transform="translate(0,0)"><g transform="translate(-111.8671875,-12)"><foreignObject width="223.734375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">orders_0, orders_1 ... orders_3</div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-posts_4-88888" label-offset-y="9.897681794155403" transform="translate(377.6953125,2309.4479598999023)"><path d="M 0,9.897681794155403 a 40.9609375,9.897681794155403 0,0,0 81.921875 0 a 40.9609375,9.897681794155403 0,0,0 -81.921875 0 l 0,53.8976817941554 a 40.9609375,9.897681794155403 0,0,0 81.921875 0 l 0,-53.8976817941554" transform="translate(-40.9609375,-36.846522691233105)" class="label-container"></path><g class="label" transform="translate(0,0)"><g transform="translate(-30.9609375,-12)"><foreignObject width="61.921875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">orders_4</div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-posts_last-88889" label-offset-y="14.737274220032841" transform="translate(558.40625,2309.4479598999023)"><path d="M 0,14.737274220032841 a 89.75,14.737274220032841 0,0,0 179.5 0 a 89.75,14.737274220032841 0,0,0 -179.5 0 l 0,58.737274220032845 a 89.75,14.737274220032841 0,0,0 179.5 0 l 0,-58.737274220032845" transform="translate(-89.75,-44.10591133004927)" class="label-container"></path><g class="label" transform="translate(0,0)"><g transform="translate(-79.75,-12)"><foreignObject width="159.5" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">orders_5 ... orders_15</div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-other_tables-88890" label-offset-y="15.561140214262117" transform="translate(1024.421875,2309.4479598999023)"><path d="M 0,15.561140214262117 a 103.0390625,15.561140214262117 0,0,0 206.078125 0 a 103.0390625,15.561140214262117 0,0,0 -206.078125 0 l 0,83.56114021426211 a 103.0390625,15.561140214262117 0,0,0 206.078125 0 l 0,-83.56114021426211" transform="translate(-103.0390625,-57.34171032139317)" class="label-container"></path><g class="label" transform="translate(0,0)"><g transform="translate(-93.0390625,-24)"><foreignObject width="186.078125" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Other non-sharding tables<br/>users, stocks, topics ...</div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-orders_4-88892" transform="translate(739.1171875,2309.4479598999023)"><rect rx="0" ry="0" x="-40.9609375" y="-22" width="81.921875" height="44" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-30.9609375,-12)"><foreignObject width="61.921875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">orders_4</div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-check_table-88867" transform="translate(674.7500038146973,1353.045310974121)"><polygon points="106.04531250000001,0 212.09062500000002,-106.04531250000001 106.04531250000001,-212.09062500000002 0,-106.04531250000001" transform="translate(-106.04531250000001,106.04531250000001)" class="label-container"></polygon><g class="label" transform="translate(0,0)"><g transform="translate(-73.828125,-24)"><foreignObject width="147.65625" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Check sharding rules<br/>by table name</div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-parse-88866" transform="translate(674.7500038146973,1151)"><polygon points="0,0 197.9375,0 197.9375,-92 0,-92 0,0 -8,0 205.9375,0 205.9375,-92 -8,-92 -8,0" transform="translate(-98.96875,46)" class="label-container"></polygon><g class="label" transform="translate(0,0)"><g transform="translate(-88.96875,-36)"><foreignObject width="177.9375" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Parser SQL to get AST<br/>
  <br/>
  ast = sqlparser.Parse(sql)</div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-format_sql-88865" transform="translate(674.7500038146973,985)"><polygon points="-70,0 269.296875,0 269.296875,-140 -70,-140 0,-70" transform="translate(-134.6484375,70)" class="label-container"></polygon><g class="label" transform="translate(0,0)"><g transform="translate(-124.6484375,-60)"><foreignObject width="249.296875" height="120"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Format sql, args for get full SQL<br/><br/>
    sql = select * from orders<br/>
    where user_id = 100 and status = 1<br/>
    limit 10 order by id desc</div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-router-88864" transform="translate(674.7500038146973,831)"><polygon points="0,0 136.53125,0 136.53125,-68 0,-68 0,0 -8,0 144.53125,0 144.53125,-68 -8,-68 -8,0" transform="translate(-68.265625,34)" class="label-container"></polygon><g class="label" transform="translate(0,0)"><g transform="translate(-58.265625,-24)"><foreignObject width="116.53125" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">router(sql, args)<br/><br/></div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-process_ast-88872" transform="translate(532.0976600646973,1593.5984344482422)"><circle x="-60.5078125" y="-22" r="60.5078125" class="label-container"></circle><g class="label" transform="translate(0,0)"><g transform="translate(-50.5078125,-12)"><foreignObject width="101.015625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Sharding rules</div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-check_table_1-88873" transform="translate(1024.421875,2082.106246948242)"><polygon points="11,0 144.3125,0 155.3125,-22 144.3125,-44 11,-44 0,-22" transform="translate(-77.65625,22)" class="label-container"></polygon><g class="label" transform="translate(0,0)"><g transform="translate(-56.65625,-12)"><foreignObject width="113.3125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Return Raw SQL</div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-not_match_error-88874" transform="translate(381.0065155029297,1762.1062469482422)"><polygon points="-22.666666666666668,0 277.1197916666667,0 243.11979166666666,-68 11.333333333333334,-68" transform="translate(-127.2265625,34)" class="label-container"></polygon><g class="label" transform="translate(0,0)"><g transform="translate(-117.2265625,-24)"><foreignObject width="234.453125" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Return Error<br/>SQL query must has sharding key</div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-get_new_table_name-88879" transform="translate(739.1171875,1916.1062469482422)"><polygon points="0,0 442.390625,0 442.390625,-92 0,-92 0,0 -8,0 450.390625,0 450.390625,-92 -8,-92 -8,0" transform="translate(-221.1953125,46)" class="label-container"></polygon><g class="label" transform="translate(0,0)"><g transform="translate(-211.1953125,-36)"><foreignObject width="422.390625" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Use value in WhereValue (100) for get sharding table index<br/>orders + (100 % 16)<br/>Sharding Table = orders_4</div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-new_sql-88880" transform="translate(739.1171875,2082.106246948242)"><polygon points="23,0 292.296875,0 315.296875,-46 292.296875,-92 23,-92 0,-46" transform="translate(-157.6484375,46)" class="label-container"></polygon><g class="label" transform="translate(0,0)"><g transform="translate(-124.6484375,-36)"><foreignObject width="249.296875" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">select * from orders_4<br/>where user_id = 100 and status = 1<br/>limit 10 order by id desc</div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-match_sharding_key-88884" transform="translate(739.1171875,1762.1062469482422)"><rect rx="0" ry="0" x="-83.1328125" y="-22" width="166.265625" height="44" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-73.1328125,-12)"><foreignObject width="146.265625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">match_sharding_key</div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-ExecContext-88851" transform="translate(481.2760429382324,675)"><polygon points="-14.666666666666666,0 102.22916666666667,0 124.22916666666667,-44 7.333333333333333,-44" transform="translate(-54.78125,22)" class="label-container"></polygon><g class="label" transform="translate(0,0)"><g transform="translate(-44.78125,-12)"><foreignObject width="89.5625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">ExecContext</div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-QueryContext-88852" transform="translate(674.7500038146973,675)"><polygon points="-14.666666666666666,0 111.38541666666667,0 133.38541666666666,-44 7.333333333333333,-44" transform="translate(-59.359375,22)" class="label-container"></polygon><g class="label" transform="translate(0,0)"><g transform="translate(-49.359375,-12)"><foreignObject width="98.71875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">QueryContext</div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-QueryRowContext-88853" transform="translate(887.3802223205566,675)"><polygon points="-14.666666666666666,0 140.54166666666666,0 162.54166666666666,-44 7.333333333333333,-44" transform="translate(-73.9375,22)" class="label-container"></polygon><g class="label" transform="translate(0,0)"><g transform="translate(-63.9375,-12)"><foreignObject width="127.875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">QueryRowContext</div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-Conn-88855" transform="translate(665.171875,581)"><rect rx="22" ry="22" x="-33.3203125" y="-22" width="66.640625" height="44" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-17.8203125,-12)"><foreignObject width="35.640625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Conn</div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-gorm_query-88849" transform="translate(665.171875,437)"><rect rx="0" ry="0" x="-130.171875" y="-22" width="260.34375" height="44" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-120.171875,-12)"><foreignObject width="240.34375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">connPool.QueryContext(sql, args)<br/></div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-db-88847" transform="translate(665.171875,343)"><rect rx="0" ry="0" x="-41.296875" y="-22" width="82.59375" height="44" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-31.296875,-12)"><foreignObject width="62.59375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Gorm DB</div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-first-88845" transform="translate(665.171875,90)"><rect rx="5" ry="5" x="-123.7421875" y="-82" width="247.484375" height="164" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-113.7421875,-72)"><foreignObject width="227.484375" height="144"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">SQL Query<br/><br/>
select * from orders<br/>
where user_id = ? and status = ?<br/>
limit 10 order by id desc<br/>
args = [100, 1]</div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-result-88896" transform="translate(680.2747421264648,2463.7896728515625)"><polygon points="-14.666666666666666,0 129.58854166666666,0 107.58854166666667,-44 7.333333333333333,-44" transform="translate(-57.4609375,22)" class="label-container"></polygon><g class="label" transform="translate(0,0)"><g transform="translate(-47.4609375,-12)"><foreignObject width="94.921875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Query results</div></foreignObject></g></g></g></g></g></g></svg>